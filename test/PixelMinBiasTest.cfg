#
# CMSSW cfg file for HLT MinBias trigger paths.  Requests global Pixel Track
# reconstruction with as low as possible threshold and bases the trigger on 
# observing a minimum number of well separated tracks with same origin in
# nominal IP-region. Only the first N tracks found are stored as filterobject
# even if there might be more than N suitable tracks in the event.
#
process MinBiasHLT  = {

    include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"
#    include "Configuration/StandardSequences/data/FakeConditions.cff"

    source = PoolSource { 
      untracked vstring fileNames = {
      "file:/afs/cern.ch/user/h/huu/scratch0/CMSSW_1_6_0_pre3/src/production/MinBias.root"
#     for the time being no public MinBias samples available, so use low-Pt QCD (100% efficiency)
#      '/store/RelVal/2007/6/22/RelVal-RelVal150QCD_pt15_20-1182500741/0000/023AE481-A520-DC11-BFE5-000423D987B8.root',
#      '/store/RelVal/2007/6/22/RelVal-RelVal150QCD_pt15_20-1182500741/0000/04335FB0-A620-DC11-BCAE-000E0C3F081A.root',
#      '/store/RelVal/2007/6/22/RelVal-RelVal150QCD_pt15_20-1182500741/0000/0446B1AF-A620-DC11-9F80-000423D991F0.root',
#      '/store/RelVal/2007/6/22/RelVal-RelVal150QCD_pt15_20-1182500741/0000/74D5AAD2-C120-DC11-A009-0019BB3F734E.root',
#      '/store/RelVal/2007/6/22/RelVal-RelVal150QCD_pt15_20-1182500741/0000/EA284BE8-A620-DC11-8FA3-000423D9A2AE.root'
      }
    }

    untracked PSet maxEvents = {untracked int32 input = 2000}

    include "HLTrigger/Configuration/data/common/HLTSetup.cff"

#   invoke Pixel reconstruction followed by MinBias filter based on the reconstructed tracks
    include "HLTrigger/special/data/MinBias-With-Pixel-Tracks.cff"

#   invoke Pixel reconstruction followed by MinBias filter based on the reconstructed tracks
    include "HLTrigger/special/data/MBForAlignment.cff"

    module glob = HLTMakeSummaryObjects { }

    module out = PoolOutputModule {
	untracked string fileName = "hlt_MB_test.root"
	untracked vstring outputCommands =
	{ # drop a bunch of branches to keep output file size reasonable
	    "drop *",
	    "keep recoHLTFilterObjectBase_*_*_*",
	    "keep recoHLTFilterObjectWithRefs_*_*_*",
	    "keep recoHLTPathObject_*_*_*",
	    "keep recoHLTGlobalObject_*_*_*",
	    "keep recoVertex_*_*_*",
	    "keep recoTracks_*_*_*",
	    "keep recoTrackExtras_*_*_*",
	    "keep TrajectorySeeds_*_*_*",
	    "keep SimTracks_*_*_*",
	    "keep SimVertex_*_*_*",
	    "keep recoRecoChargedCandidates_*_*_*",
	    "keep l1extraL1ParticleMaps_*_*_*",
	    "keep edmHepMCProduct_*_*_*",
	    "keep edmTriggerResults_*_*_*"
	}
    }

// HLT trigger paths

    path HLT_MinBiasPixel = {hltMinBiasPixel}

    path HTL_MinBiasPixel_Trk5 = {hltMBForAlignment}

    endpath outpath = { glob, out }
}

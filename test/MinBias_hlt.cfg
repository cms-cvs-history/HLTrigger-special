#
# CMSSW cfg file for HLT MinBias trigger paths.  Requests global Pixel Track
# reconstruction with as low as possible threshold and bases the trigger on 
# observing a minimum number of well separated tracks with same origin in
# nominal IP-region. Only the first N tracks found are stored as filterobject
# even if there might be more than N suitable tracks in the event.
#
process MinBiasHLT  = {

    source = PoolSource { 
      untracked vstring fileNames = {
       "/store/mc/2007/1/26/mc-onsel-120_PU_Minbias-DIGI-RECO-NoPU/0000/00950641-F1B3-DB11-80AA-0002B3D90DEF.root"}
      untracked int32 maxEvents = 20
    }

#   do global pixel track reconstruction with low thresholds (0.2 GeV/c)
    include "HLTrigger/special/data/MinBias-Pixel-Reco.cff"

#   invoke the MinBias filter based on the reconstructed Pixel tracks
    include "HLTrigger/special/data/MinBias-With-Pixel-Tracks.cff"

    untracked PSet options = {
	untracked bool wantSummary = true  # default is false
	untracked bool makeTriggerResults = true
	vstring listOfTriggers = {"*"}  # get results for all triggers
    }

    module glob = HLTMakeSummaryObjects { }

    module out = PoolOutputModule {
	untracked string fileName = "hlt_MB_test.root"
	untracked vstring outputCommands =
	{ # drop a bunch of branches to keep output file size reasonable
	    "drop *",
	    "keep recoHLTFilterObjectBase_*_*_*",
	    "keep recoHLTFilterObjectWithRefs_*_*_*",
	    "keep recoHLTPathObject_*_*_*",
	    "keep recoHLTGlobalObject_*_*_*",
	    "keep recoVertex_*_*_*",
	    "keep recoTracks_*_*_*",
	    "keep recoTrackExtras_*_*_*",
	    "keep TrajectorySeeds_*_*_*",
	    "keep SimTracks_*_*_*",
	    "keep SimVertex_*_*_*",
	    "keep recoRecoChargedCandidates_*_*_*",
	    "keep l1extraL1ParticleMaps_*_*_*",
	    "keep edmHepMCProduct_*_*_*",
	    "keep edmTriggerResults_*_*_*"
	}
    }

// HLT trigger paths

//    this path without using prescale at L1
//    path HLTMBPIX = { siPixelClusters, siPixelRecHits, pixelTracks &  hltPixlCands & hltPixlMBFilt}
//  this path to use a prescale at L1 (normally should be ~BX-rate, i.e. ~4E7 @ 1E34)
//  presently L1 does ZeroBias with prescale=1, i.e. no effect (same results as path without L1TSeq)
    path HLTMBPIX = {L1TSeq, siPixelClusters, siPixelRecHits, pixelTracks, hltPixlCands & hltPixlMBFilt}

    endpath outpath = { glob, out }
}
